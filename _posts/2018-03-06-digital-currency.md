---
title: "加密货币"
category: "技术"
---

### 区块链

区块链实际上就是一个数据的容器，只是与其他的数据存储方式相比，具有不易篡改的特点。

公司需要定期对财务状况进行审计，也就是对一段时间内的财务状况进行一遍彻底的检查。而区块链天生具有不易篡改的特点，数据一旦放进区块链中，就难以改变，因此使用区块链技术将极大的降低审计的工作量。

### 一致性算法

对于常见的加密货币，都使用的是共有区块链，也就是每个全功能节点都有一份区块链的拷贝。随着交易的进行，全局的区块链需要不断进行更新，因此在分布式的环境下，就需要设计一种一致性算法，维持每个节点之间区块链数据一致。

与常规的分布式应用架构不同，对于加密货币这类应用，我们不能假定每个节点都是可信的，因为在公网上，用户完全可以开发一个恶意的客户端钻协议的漏洞。

### 比特币

##### 分叉（fork）

全球范围的 p2p 网络传播数据需要一定时间，因此拓扑距离较远的两个节点有可能各自独立地挖到两个区块，并将其添加到各自认为的全局区块链中。比特币的协议规定，全局只能有一个合法的区块链，因此如果出现了分叉，节点就必须选择较长的那个链，因为更长的链代表了更大的计算量。

关键在于比特币规定区块链必须是顺序结构，不能分叉，因此如果出现了分叉，在其中一个分支确定丢弃之前，没有办法确定哪个分支会最终胜出。

### 以太坊（Ethereum）

不像比特币一样使用区块链来记账，以太坊在区块链里面存储的是程序脚本。

### EOS

### Thoughts

比特币解决的两大问题，同时也是创造其他加密货币所必须要解决的两个问题：
- 双重支付问题。如何防止出现 double-spending 的现象？
- 一致性算法。如何保证每个节点的账本状态是一致的。

对于前一个问题，本质上是因为数字化的信息非常容易复制。金银之所以没有双重支付的问题，就是因为金银本身不可复制。但是任何电子储存的信息非常容易进行复制

区块链这种思路是好的，因为它将计算量分摊到了每个区块中，这样时间更早的区块就会难以篡改。

但是这样就需要矿工，因为区块链是需要计算力来维护的。对于比特币来说，矿工往往不是参与交易的个体。能不能把区块计算的工作交给交易的双方完成。

不止有一个全局的区块链，而是每个账户都有一套自己的区块链。这种个人区块链中，每个区块只记录了一条交易记录，因此与比特币相比，要更加轻量级。在每个用户的私人账本上，不仅记录流水账，还记录余额，因此更像传统银行的个人储蓄账户。

我们可以创造一个轻量级的“中心”，这个中心不负责管理和维护每个个人账户的区块链，而是负责分发一个全局心跳链。这个中心具有自己的公私钥，每隔固定时间就增加一个心跳区块。

如果 Alice 向 Bob 转账，那么 Alice 和 Bob 的个人区块链都需要进行更新，但是二者都要确认对方的个人账户状态是合法的。因为对于恶意用户，完全可以伪造自己的。