---
title: 个人博客优化
draft: true
---

# 自己开发生成器

本站没有使用流行的 SSG，而是自己开发一套脚本，用于生成静态网站。

尝试过许多 SSG，发现它们的功能大同小异，最大区别就是开发使用的语言、主题模板引擎，核心功能都差不多。

自己开发一套专用的网站生成器，主要是考虑到以下几点：

1. 完全自己开发，有成就感，充分了解细节，能进一步扩展
2. 可以使用我最熟悉的 Python，不用去学 Ruby 和 Haskell
3. 可以使用功能强大的 Pandoc，可以利用大量的前端 NodeJS 工具
4. 不需要对标 Jekyll、Pelican，只要满足自己需求即可，我们这个网站是很简单的
5. （WIP）未来可以将 jupyter notebook 转换成博客页面，更方便在文章里插入图表，还能所见即所得编辑

还有一个重要原因，就是便于调整。没有完美的工具，自己开发的也一样。可能随着使用，逐渐感觉到功能不完美，需要调整，自己开发的生成脚本显然改起来更方便。

要随时保持数据迁移的能力，这很关键，因为博客的重点是内容而非样式。

# 自动构建发布

工作之后 Github 用得少了，才发现有不少新功能。现在静态网站可以使用 Github Actions 自动生成了。

其实就是 Jenkins，自己准备一个脚本，描述触发条件和执行的内容。

最初，只能使用 Jekyll 构建。后来允许禁用 Jekyll，但需要本地构建后上传至 gh-pages 分支。现在，使用 actions，可以运行自己的脚本，再将生成的网站打包上传，而且全自动。

# 网站的配套功能

- 评论系统
- 访问人次统计：google analytics

## 评论

静态网站，内容也是静态的，而评论需要数据库，需要后端，所以只能借助第三方评论系统。

最流行的就是 disqus，但速度较慢。而且需要把一段 JS 嵌入网页，严重影响性能。

第三方评论有自己的用户系统，需要评论者在平台上注册。我们的目标读者（如果有的话）应该以开发者为主，有几个评论系统用的是 github issue。

纯静态评论？github提供了actions 和 API，可以自动化提交代码。我们可以将评论放在另一个仓库中，用户提交评论，本质上就是发送一个 pull-request。
收到 pull request，我们可以无条件合并。静态网页通过 JS 访问评论仓库，获取该文章的评论。

评论系统需要注意的是，网站可能改版，文章的url可能变更，但一篇文章的评论不应该消失。每个文章都应该有identifier，类似变量名那样直观好记的，评论通过identifier与文章对应。如果我们要修改文章的identifier，就像数据库迁移，也可以通过脚本实现原子性操作。

## 通用后台 LeanCloud

我们只需要后端实现一些基础功能：发表评论、访问统计。

LeanCloud 直接提供这些功能，属于 BaaS（Backend as a Service）。开发者不用自己开发后端程序代码，不用自己维护数据库，只需要一个API，就能直接读写 leancloud 线上数据库。


# 让搜索引擎收录

把文章放在网上就是希望别人读，想让别人读就要让搜索引擎收录。Google 和百度都给站长提供了管理后台。

登录资源管理平台，添加一个网站，证明网站由自己管理（通常要求你在根目录下放一个静态页面）

[百度搜索资源平台](https://ziyuan.baidu.com/site/index#/)
