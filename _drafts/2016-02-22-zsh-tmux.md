---
title: "Zsh 和 Tmux"
category: "工具"
tags: ["linux"]
---

为了让我的工作环境显得更加高端，最近了解了一下 Zsh 和 tmux。

### Zsh

Zsh 是一个 Shell，和 Bash 是一类东西，但是这货似乎功能更强大一些。

安装方法和其他软件一样，直接 `sudo apt-get install zsh` 即可。装好之后，Debian 默认的终端模拟器仍然使用 Bash，要启动 Zsh 需要输入 `zsh` 命令。

修改默认 Shell，为 Zsh，可以使用命令 `sudo chsh -s $(which zsh) $whoami`。可以通过 `/etc/passwd` 查看是否修改成功。要使配制生效，需要注销当前用户并重新登录。

接下来要装的叫做 `oh-my-zsh`，这是一个很棒的 Zsh 配置，安装方法在项目的 Github 页面上有写，直接运行下面的命令即可（要保证装有 curl）：

``` bash
$ sh -c "$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"
```

这条命令会自动下载 Zsh 配置，并且帮你切换默认 Shell 到 Zsh。

### Zsh 的一些用法

##### 自动 `pushd`

如果你没听说过 `pushd`，只需要知道它和 `cd` 命令功能一样，但是会把切换目录的过程记录在一个栈中，可以通过 `popd` 返回，就像资源管理器中的后退按钮一样。

在 Zsh 中，如果直接输入一个目录，就会自动执行 `pushd`。

##### 自动补全和修正

自动补全的功能 Bash 也有，不过 Zsh 更加强大。按 `Tab` 键会出现一系列候选项，再按 `Tab` 就可以在候选项之间进行选择。而且在 Bash 中，自动补全是按照输入部分作为候选项的前缀的，而且大小写敏感，例如 `ls D` 会提示所有以 `D` 开头的目录；在 Zsh 中，补全与大小写无关，且可以输入目标的任意一个字串，不一定要从头开始，例如输入 `ls ocume` 也能匹配 `Document`。

另外，Zsh 还有自动修正的功能，如果名字拼错了，Zsh 会进行提示。

##### 插件集成

另一个方便之处，就是与 git、rvm 这类第三方软件的集成。如果在 Zsh 中切换到一个 git 项目中，

### 样式

在 `~/.zshrc` 中可以指定样式，我在默认样式的基础上做了一些更改：

```
local ret_status="%(?:%{$fg_bold[green]%}➜ :%{$fg_bold[red]%}➜ )%{$reset_color%}"
PROMPT='%{$fg_bold[cyan]%}%c%{$reset_color%} $(git_prompt_info)${ret_status}'

ZSH_THEME_GIT_PROMPT_PREFIX="%{$fg_bold[blue]%}git:(%{$fg[red]%}"
ZSH_THEME_GIT_PROMPT_SUFFIX=" "
ZSH_THEME_GIT_PROMPT_DIRTY="%{$fg[yellow]%}✗%{$fg[blue]%})"
ZSH_THEME_GIT_PROMPT_CLEAN="%{$fg[green]%}✔%{$fg[blue]%})"
```

- - -

## tmux

tmux 是一个终端窗口管理器，和 screen 的作用相同，但是功能更加强大。

tmux 的配置文件是 `~/.tmux.conf`。

tmux 中有三个重要概念，分别是：

- 面板
- 窗口
- 会话

简单来说，一次 tmux 会话可以包含多个窗口，每个窗口又可以包含多个面板，每个面板都是一个完整的终端模拟器。分割窗口的功能与 Terminator 有些类似。

在 tmux 环境下，默认命令前缀是 Ctrl+b，例如 `Ctrl+b c` 的意思是创建新的 window。
