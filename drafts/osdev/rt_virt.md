为了融合非实时任务，可以直接修改调度器。但是这涉及到RTOS的具体细节，要求开发者对RTOS有非常细致的了解。还有一种方法就是二级调度，在IdleTask里面使用task_yield让出自己的时间片，但是如何决定task_yield之后执行的是什么？

在VxWorks中，`taskDelay(0)`不会让当前任务休眠，它的作用是把当前任务从此优先级的就绪队列中删除，并添加到这个就绪队列的末尾。如果这个任务是此优先级的唯一任务，那么`taskDelay(0)`不会有任何作用，当前任务依然处于就绪状态。

创建一些看门狗对象（wdog），每次时钟中断的时候执行，但是这与直接修改`tick_advance()`没有任何区别。况且，时钟中断并不是唯一一个涉及到非实时任务的情况。`task_stop`有可能切换到一个非实时任务；`task_cont`有可能抢占一个非实时任务。

也就是说，针对IdleTask或WrapTask这个特殊任务，我们需要两个钩子函数，分别叫做`task_swap_in`和`task_swap_out`，分别在一个任务开始运行的时候和任务即将换出的时候执行（都是在中断上下文中）。那么在task_swap_in和task_swap_out里面，可以直接替换TCB里面的regs字段，相当于切换了任务内容。

（如果我们能够随便切换一个任务的regs，那么stack就不再有意义了。不过WrapTask应该是不能删除的，因此stack也就没有意义了可以用来保存其他的数据，例如IdleTask的regs地址。）